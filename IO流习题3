package com.homework;

import java.io.*;
import java.util.Properties;

/*
(1) 要编写一个dog.properties
name=tom
age=5
color=red
(2) 编写Dog 类(name,age,color) 创建一个dog对象，读取dog.properties 用相应的内容完成属性初始化，并输出
(3) 将创建的Dog 对象，序列化到 文件 dog.dat 文件
 */
public class Homework03 {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        String path = "e:dog.dat";

        Properties properties = new Properties();
        Dog dog = new Dog("tom", 5, "red");
        properties.setProperty("name", dog.getName());
        properties.setProperty("age", dog.getAge() + "");//int 转成 String 在后面加“” 即可
        properties.setProperty("color", dog.getColor());


        properties.store(new FileOutputStream("src\\dog.properties"), null);

        properties.list(System.out);

        a(path);
        b(path);
    }

    public static void a(String path) throws IOException {//序列化
        ObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(path));
        objectOutputStream.writeObject(new Dog("tom", 5, "red"));
        objectOutputStream.close();
        System.out.println("序列化保存成功");
    }

    public static void b(String path) throws IOException, ClassNotFoundException {
        ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(path));
        Object dog = objectInputStream.readObject();
        System.out.println(dog);
        objectInputStream.close();
        System.out.println("反序列化");
    }
}

class Dog implements Serializable {
    private String name;
    private int age;
    private String color;

    public Dog(String name, int age, String color) {
        this.name = name;
        this.age = age;
        this.color = color;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    @Override
    public String toString() {
        return "Dog{" +
                "name='" + name + '\'' +
                ", age='" + age + '\'' +
                ", color='" + color + '\'' +
                '}';
    }
}
